(this["webpackJsonpuser-management"]=this["webpackJsonpuser-management"]||[]).push([[0],{44:function(e,t,a){e.exports=a(79)},49:function(e,t,a){},51:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(40),c=a.n(l),o=(a(49),a(50),a(51),a(17)),s=a(7),u=a(83),i=a(18);a(52),a(54);i.initializeApp({apiKey:"AIzaSyB7L8az3ZXHUJBigs9tcRQTZwC2Koiuy4E",authDomain:"clear-gantry-283402.firebaseapp.com",databaseURL:"https://clear-gantry-283402.firebaseio.com",projectId:"clear-gantry-283402",storageBucket:"clear-gantry-283402.appspot.com",messagingSenderId:"1040274309787",appId:"1:1040274309787:web:46952bd121dd1b80ab7c3e"});var m=i.auth(),d=(i.firestore(),i.storage(),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null," You are Logged in!..."),r.a.createElement(u.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),m.signOut()}},"LOG OUT"))}),p=a(12),b=a.n(p),f=a(16),h=a(5),E=a(82),v=a(80),g=a(81),O=a(42),w=r.a.createContext(),j=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(h.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(!0),u=Object(h.a)(s,2),i=u[0],d=u[1];return Object(n.useEffect)((function(){m.onAuthStateChanged((function(e){o(e),d(!1)}))}),[]),i?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(w.Provider,{value:{currentUser:c}},t)},y=a(8),x=a.n(y),S=Object(s.g)((function(e){var t=e.history,a=Object(n.useState)(""),l=Object(h.a)(a,2),c=l[0],i=l[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),p=d[0],j=d[1],y=Object(n.useState)(""),S=Object(h.a)(y,2),k=S[0],C=S[1],P=Object(n.useState)(""),B=Object(h.a)(P,2),q=B[0],z=B[1],L=Object(n.useState)(""),U=Object(h.a)(L,2),I=U[0],R=U[1],A=Object(n.useState)(!1),G=Object(h.a)(A,2),D=G[0],N=G[1],Q=function(e){R("");var t=e.target,a=t.name,n=t.value;"email"===a?(i(n),j(n?"":"Value is Required")):"password"===a&&(C(n),z(n?"":"Value is Required"))},V=function(){var e=Object(f.a)(b.a.mark((function e(a){var n,r,l,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),N(!0),c&&k){e.next=6;break}return N(!1),R("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!p&&!q){e.next=10;break}return N(!1),R("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,x.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(c));case 12:if(void 0===(n=e.sent).data.uid){e.next=32;break}return e.next=16,x.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/getUserDetails/".concat(n.data.uid,"/").concat(k));case 16:if(""===(r=e.sent).data){e.next=30;break}if(r.data){e.next=24;break}return N(!1),R("Please enter correct password"),e.abrupt("return",!1);case 24:return l=n.data.uid,e.next=27,x.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/question?uid=".concat(l));case 27:o=e.sent,N(!1),t.push({pathname:"/loginsecondfactor",state:{uid:n.data.uid,email:c,password:k,question:o.data.body}});case 30:e.next=35;break;case 32:return N(!1),R("Email not registered"),e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useContext)(w).currentUser?r.a.createElement(s.a,{to:"/home"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(O.a,{sm:6},r.a.createElement("h1",null,"Login"),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{controlId:"formBasicLginEmail"},r.a.createElement(E.a.Label,null,"Email address*"),r.a.createElement(E.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:c,onChange:Q,onBlur:Q}),r.a.createElement("div",null,p)),r.a.createElement(E.a.Group,{controlId:"formBasicLoginPassword"},r.a.createElement(E.a.Label,null,"Password*"),r.a.createElement(E.a.Control,{type:"password",placeholder:"Password",name:"password",value:k,onChange:Q,onBlur:Q}),r.a.createElement("div",null,q)),r.a.createElement("h4",null,I),r.a.createElement(u.a,{variant:"primary",onClick:V,disabled:D},D&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(o.b,{to:"/register",className:"link"},r.a.createElement("p",null,"Doesn't have an account? Sign Up here.")))))))})),k=RegExp(/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,})+$/),C=RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,}/),P=Object(s.g)((function(e){var t=e.history,a=Object(n.useState)(""),l=Object(h.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(""),m=Object(h.a)(i,2),d=m[0],p=m[1],w=Object(n.useState)(""),j=Object(h.a)(w,2),y=j[0],S=j[1],P=Object(n.useState)(""),B=Object(h.a)(P,2),q=B[0],z=B[1],L=Object(n.useState)(""),U=Object(h.a)(L,2),I=U[0],R=U[1],A=Object(n.useState)(""),G=Object(h.a)(A,2),D=G[0],N=G[1],Q=Object(n.useState)(""),V=Object(h.a)(Q,2),W=V[0],F=V[1],J=Object(n.useState)(""),T=Object(h.a)(J,2),Z=T[0],K=T[1],$=Object(n.useState)(""),H=Object(h.a)($,2),M=H[0],X=H[1],Y=Object(n.useState)(""),_=Object(h.a)(Y,2),ee=_[0],te=_[1],ae=Object(n.useState)(""),ne=Object(h.a)(ae,2),re=ne[0],le=ne[1],ce=Object(n.useState)(!1),oe=Object(h.a)(ce,2),se=oe[0],ue=oe[1],ie=function(e){le("");var t=e.target,a=t.name,n=t.value;"name"===a?s((function(){return p(n?"":"Value is Required"),n})):"email"===a?S((function(){return z(n?"":"Value is Required"),k.test(n)?z(""):z("Please enter valid email address"),n})):"password"===a?(R(n),N(n?"":"Value is Required"),C.test(n)?N(""):N("Weak Password"),K(W!==I?"Password doesn't match":"")):"confirmpassword"===a?(F(n),K(n!==I?"Password doesn't match":"")):"organization"===a&&(X(n),te(n?"":"Value is Required"))},me=function(){var e=Object(f.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),ue(!0),c&&y&&I&&W&&M){e.next=6;break}return le("Please fill all mandatory fields"),ue(!1),e.abrupt("return",!1);case 6:if(!(d||q||D||Z||ee)){e.next=10;break}return le("Please check the error"),ue(!1),e.abrupt("return",!1);case 10:return e.next=12,x.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(y));case 12:if(void 0!==e.sent.data.uid){e.next=34;break}return e.next=16,x.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/createUser",{email:y,password:I});case 16:return n=e.sent,e.next=19,x.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/postUserDetails",{id:n.data.uid,email:y,password:I,name:c,organization:M});case 19:if(r=e.sent,void 0===n.data.uid||""===r.data){e.next=25;break}ue(!1),t.push({pathname:"/secondfactor",state:{uid:n.data.uid,name:c,email:y,password:I,organization:M}}),e.next=32;break;case 25:return e.next=27,x.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(n.data.uid));case 27:return e.next=29,x.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(n.data.uid));case 29:return ue(!1),le("error"),e.abrupt("return",!1);case 32:e.next=37;break;case 34:return ue(!1),le("Email already present"),e.abrupt("return",!1);case 37:ue(!1);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(O.a,{sm:6},r.a.createElement("h1",null,"REGISTER"),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{controlId:"formBasicName"},r.a.createElement(E.a.Label,null,"Name*"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter Name",name:"name",value:c,onChange:ie,onBlur:ie}),r.a.createElement("div",null,d)),r.a.createElement(E.a.Group,{controlId:"formBasicEmail"},r.a.createElement(E.a.Label,null,"Email address*"),r.a.createElement(E.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:y,onChange:ie,onBlur:ie}),r.a.createElement("div",null,q)),r.a.createElement(E.a.Group,{controlId:"formBasicPassword"},r.a.createElement(E.a.Label,null,"Password*"),r.a.createElement(E.a.Control,{type:"password",placeholder:"Password",name:"password",value:I,onChange:ie,onBlur:ie}),r.a.createElement("div",null,D)),r.a.createElement(E.a.Group,{controlId:"formBasicConfirmPassword"},r.a.createElement(E.a.Label,null,"Confirm Password*"),r.a.createElement(E.a.Control,{type:"password",placeholder:"Confirm Password",name:"confirmpassword",value:W,onChange:ie,onBlur:ie}),r.a.createElement("div",null,Z)),r.a.createElement(E.a.Group,{controlId:"formBasicOrganization"},r.a.createElement(E.a.Label,null,"Organization*"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Organization",name:"organization",value:M,onChange:ie,onBlur:ie}),r.a.createElement("div",null,ee)),r.a.createElement("h4",null,re),r.a.createElement(u.a,{variant:"primary",disabled:se,onClick:me},se&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(o.b,{to:"/login",className:"link"},r.a.createElement("p",null,"Already have an account? Login here.")))))))})),B=a(43),q=function(e){var t=e.component,a=Object(B.a)(e,["component"]),l=Object(n.useContext)(w).currentUser;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},z=function(e){var t,a=e.history,l=e.location,c=Object(n.useState)("Select the question"),o=Object(h.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),p=d[0],w=d[1],j=Object(n.useState)(""),y=Object(h.a)(j,2),S=y[0],k=y[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),B=P[0],q=P[1],z=Object(n.useState)(""),L=Object(h.a)(z,2),U=L[0],I=L[1],R=Object(n.useState)(!1),A=Object(h.a)(R,2),G=A[0],D=A[1],N=(null===l||void 0===l||null===(t=l.state)||void 0===t?void 0:t.uid)||null,Q=function(e){I("");var t=e.target,a=t.name,n=t.value;"question"===a?(i(n),w("Select the question"!==n?"":"Please select the question")):"answer"===a&&(k(n),q(n?"":"Value is Required"))},V=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),D(!0),s&&S){e.next=6;break}return I("Please fill all mandatory fields"),D(!1),e.abrupt("return",!1);case 6:if(!p&&!B){e.next=10;break}return I("Please check the error"),D(!1),e.abrupt("return",!1);case 10:return e.next=12,x.a.post("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users",{uid:N,question:s,answer:S});case 12:if(!e.sent.data.body){e.next=19;break}D(!1),I("User registered Successfully"),a.push("/login"),e.next=27;break;case 19:return e.next=21,x.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(N));case 21:return e.next=23,x.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(N));case 23:return I("Error Occured... User not registered"),D(!1),a.push("/register"),e.abrupt("return",!1);case 27:D(!1);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(O.a,{sm:6},r.a.createElement("h1",null,"Enter Security Question and Answer"),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{controlId:"formQuestion"},r.a.createElement(E.a.Label,null,"Question*"),r.a.createElement(E.a.Control,{as:"select",custom:!0,onChange:Q,onBlur:Q,value:s,name:"question"},r.a.createElement("option",{value:"Select the question",hidden:!0},"Select the question"),r.a.createElement("option",{value:"What is your favourite destination?"},"What is your favourite destination?"),r.a.createElement("option",{value:"What is the name of your first pet?"},"What is the name of your first pet?"),r.a.createElement("option",{value:"what is the name of your oldest cousin?"},"what is the name of your oldest cousin?")),r.a.createElement("div",null,p)),r.a.createElement(E.a.Group,{controlId:"formAnswer"},r.a.createElement(E.a.Label,null,"Answer*"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:S,onChange:Q,onBlur:Q}),r.a.createElement("div",null,B)),r.a.createElement("h4",null,U),r.a.createElement(u.a,{variant:"primary",onClick:V,disabled:G},G&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"))))))},L=function(e){var t,a,l,c,o=e.history,s=e.location,i=Object(n.useState)(""),d=Object(h.a)(i,2),p=d[0],w=d[1],j=Object(n.useState)(""),y=Object(h.a)(j,2),S=y[0],k=y[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),B=P[0],q=P[1],z=Object(n.useState)(!1),L=Object(h.a)(z,2),U=L[0],I=L[1],R=(null===s||void 0===s||null===(t=s.state)||void 0===t?void 0:t.email)||null,A=(null===s||void 0===s||null===(a=s.state)||void 0===a?void 0:a.password)||null,G=(null===s||void 0===s||null===(l=s.state)||void 0===l?void 0:l.uid)||null,D=(null===s||void 0===s||null===(c=s.state)||void 0===c?void 0:c.question)||null,N=function(e){q("");var t=e.target,a=t.name,n=t.value;"answer"===a&&(w(n),k(n?"":"Value is Required"))},Q=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I(!0),p){e.next=6;break}return I(!1),q("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!S){e.next=10;break}return I(!1),q("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,x.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users?uid=".concat(G,"&answer=").concat(p));case 12:if("User Autheticated Successfully"!==e.sent.data.body){e.next=17;break}m.signInWithEmailAndPassword(R,A).then((function(e){I(!1),o.push("/home")})).catch((function(e){I(!1);var t=e.message;q(t)})),e.next=20;break;case 17:return I(!1),q("Please enter the correct answer"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(O.a,{sm:6},r.a.createElement("h1",null,"Answer the Security Question"),r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{controlId:"formQuestion"},r.a.createElement(E.a.Label,null,"Question"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter Question",name:"question",value:D,onChange:N,onBlur:N,disabled:!0})),r.a.createElement(E.a.Group,{controlId:"formAnswer"},r.a.createElement(E.a.Label,null,"Answer*"),r.a.createElement(E.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:p,onChange:N,onBlur:N}),r.a.createElement("div",null,S)),r.a.createElement("h4",null,B),r.a.createElement(u.a,{variant:"primary",onClick:Q,disabled:U},U&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"))))))};var U=function(){return r.a.createElement(j,null,r.a.createElement(o.a,null,r.a.createElement(s.d,null,r.a.createElement(q,{exact:!0,path:"/",component:d}),r.a.createElement(q,{exact:!0,path:"/home",component:d}),r.a.createElement(s.b,{exact:!0,path:"/login",component:S}),r.a.createElement(s.b,{exact:!0,path:"/register",component:P}),r.a.createElement(s.b,{exact:!0,path:"/secondfactor",component:z}),r.a.createElement(s.b,{exact:!0,path:"/loginsecondfactor",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.4545982e.chunk.js.map