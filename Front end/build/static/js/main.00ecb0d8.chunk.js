(this["webpackJsonpuser-management"]=this["webpackJsonpuser-management"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(53),o=a.n(s),c=(a(66),a(67),a(68),a(24)),l=a(8),i=a(110),u=a(30),m=a(54);a(77),a(78);u.initializeApp({apiKey:"AIzaSyB7L8az3ZXHUJBigs9tcRQTZwC2Koiuy4E",authDomain:"clear-gantry-283402.firebaseapp.com",databaseURL:"https://clear-gantry-283402.firebaseio.com",projectId:"clear-gantry-283402",storageBucket:"clear-gantry-283402.appspot.com",messagingSenderId:"1040274309787",appId:"1:1040274309787:web:46952bd121dd1b80ab7c3e"});var d=u.auth(),p=u.firestore(),f=m.storage(),h=u,g=function(){var e=h.auth().currentUser;console.log("Sign-in provider: "+e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null," You are Logged in!..."),r.a.createElement(i.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),d.signOut()}},"LOG OUT"))},E=a(11),b=a.n(E),v=a(18),y=a(7),S=a(108),O=a(106),w=a(107),U=a(56),C=r.a.createContext(),I=function(e){var t=e.children,a=Object(n.useState)(null),s=Object(y.a)(a,2),o=s[0],c=s[1],l=Object(n.useState)(!0),i=Object(y.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){c(e),m(!1)}))}),[]),u?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(C.Provider,{value:{currentUser:o}},t)},A={ID:"id",PhotoURL:"photoUrl",Name:"nickname",Email:"email",Password:"image/",DOC:"added",Description:"mydesc",UPLOAD_CHANGED:"state_changed",PREFIX_IMAGE:"image/",CurrentUserdocKey:""},k=a(9),j=a.n(k),P=Object(l.g)((function(e){var t=e.history,a=Object(n.useState)(""),s=Object(y.a)(a,2),o=s[0],u=s[1],m=Object(n.useState)(""),d=Object(y.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(y.a)(h,2),E=g[0],I=g[1],k=Object(n.useState)(""),P=Object(y.a)(k,2),x=P[0],L=P[1],N=Object(n.useState)(""),R=Object(y.a)(N,2),D=R[0],B=R[1],F=Object(n.useState)(!1),Q=Object(y.a)(F,2),M=Q[0],V=Q[1],X=function(e){B("");var t=e.target,a=t.name,n=t.value;"email"===a?(u(n),f(n?"":"Value is Required")):"password"===a&&(I(n),L(n?"":"Value is Required"))},W=function(e){localStorage.setItem(A.Name,e.name),localStorage.setItem(A.ID,e.id),localStorage.setItem(A.PhotoURL,e.URL),localStorage.setItem(A.FirebaseDocumentId,e.id)},K=function(){var e=Object(v.a)(b.a.mark((function e(a){var n,r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),V(!0),o&&E){e.next=6;break}return V(!1),B("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!p&&!x){e.next=10;break}return V(!1),B("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,j.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(o));case 12:if(void 0===(n=e.sent).data.uid){e.next=33;break}return e.next=16,j.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/getUserDetails/".concat(n.data.uid,"/").concat(E));case 16:if(!(r=e.sent).data){e.next=31;break}if(r.data){e.next=24;break}return V(!1),B("Please enter correct password"),e.abrupt("return",!1);case 24:return W(r.data),s=n.data.uid,e.next=28,j.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/question?uid=".concat(s));case 28:c=e.sent,V(!1),t.push({pathname:"/loginsecondfactor",state:{uid:n.data.uid,email:o,password:E,question:c.data.body}});case 31:e.next=36;break;case 33:return V(!1),B("Email not registered"),e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useContext)(C).currentUser?r.a.createElement(l.a,{to:"/home"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("br",null),r.a.createElement(w.a,null,r.a.createElement(U.a,{sm:6},r.a.createElement("h1",null,"Login"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formBasicLginEmail"},r.a.createElement(S.a.Label,null,"Email address*"),r.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:o,onChange:X,onBlur:X}),r.a.createElement("div",null,p)),r.a.createElement(S.a.Group,{controlId:"formBasicLoginPassword"},r.a.createElement(S.a.Label,null,"Password*"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",value:E,onChange:X,onBlur:X}),r.a.createElement("div",null,x)),r.a.createElement("h4",null,D),r.a.createElement(i.a,{variant:"primary",onClick:K,disabled:M},M&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(c.b,{to:"/register",className:"link"},r.a.createElement("p",null,"Doesn't have an account? Sign Up here.")))))))})),x=RegExp(/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,})+$/),L=RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,}/),N=Object(l.g)((function(e){var t=e.history,a=Object(n.useState)(""),s=Object(y.a)(a,2),o=s[0],l=s[1],u=Object(n.useState)(""),m=Object(y.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(""),h=Object(y.a)(f,2),g=h[0],E=h[1],C=Object(n.useState)(""),I=Object(y.a)(C,2),A=I[0],k=I[1],P=Object(n.useState)(""),N=Object(y.a)(P,2),R=N[0],D=N[1],B=Object(n.useState)(""),F=Object(y.a)(B,2),Q=F[0],M=F[1],V=Object(n.useState)(""),X=Object(y.a)(V,2),W=X[0],K=X[1],q=Object(n.useState)(""),H=Object(y.a)(q,2),z=H[0],G=H[1],T=Object(n.useState)(""),Z=Object(y.a)(T,2),Y=Z[0],J=Z[1],_=Object(n.useState)(""),$=Object(y.a)(_,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(y.a)(ae,2),re=ne[0],se=ne[1],oe=Object(n.useState)(!1),ce=Object(y.a)(oe,2),le=ce[0],ie=ce[1],ue=function(e){se("");var t=e.target,a=t.name,n=t.value;"name"===a?l((function(){return p(n?"":"Value is Required"),n})):"email"===a?E((function(){return k(n?"":"Value is Required"),x.test(n)?k(""):k("Please enter valid email address"),n})):"password"===a?(D(n),M(n?"":"Value is Required"),L.test(n)?M(""):M("Weak Password"),G(W!==R?"Password doesn't match":"")):"confirmpassword"===a?(K(n),G(n!==R?"Password doesn't match":"")):"organization"===a&&(J(n),te(n?"":"Value is Required"))},me=function(){var e=Object(v.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),ie(!0),o&&g&&R&&W&&Y){e.next=6;break}return se("Please fill all mandatory fields"),ie(!1),e.abrupt("return",!1);case 6:if(!(d||A||Q||z||ee)){e.next=10;break}return se("Please check the error"),ie(!1),e.abrupt("return",!1);case 10:return e.next=12,j.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(g));case 12:if(void 0!==e.sent.data.uid){e.next=34;break}return e.next=16,j.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/createUser",{email:g,password:R});case 16:return n=e.sent,e.next=19,j.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/postUserDetails",{id:n.data.uid,email:g,password:R,name:o,organization:Y});case 19:if(r=e.sent,void 0===n.data.uid||""===r.data){e.next=25;break}ie(!1),t.push({pathname:"/secondfactor",state:{uid:n.data.uid,name:o,email:g,password:R,organization:Y}}),e.next=32;break;case 25:return e.next=27,j.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(n.data.uid));case 27:return e.next=29,j.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(n.data.uid));case 29:return ie(!1),se("error"),e.abrupt("return",!1);case 32:e.next=37;break;case 34:return ie(!1),se("Email already present"),e.abrupt("return",!1);case 37:ie(!1);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("br",null),r.a.createElement(w.a,null,r.a.createElement(U.a,{sm:6},r.a.createElement("h1",null,"REGISTER"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formBasicName"},r.a.createElement(S.a.Label,null,"Name*"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Enter Name",name:"name",value:o,onChange:ue,onBlur:ue}),r.a.createElement("div",null,d)),r.a.createElement(S.a.Group,{controlId:"formBasicEmail"},r.a.createElement(S.a.Label,null,"Email address*"),r.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:g,onChange:ue,onBlur:ue}),r.a.createElement("div",null,A)),r.a.createElement(S.a.Group,{controlId:"formBasicPassword"},r.a.createElement(S.a.Label,null,"Password*"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",name:"password",value:R,onChange:ue,onBlur:ue}),r.a.createElement("div",null,Q)),r.a.createElement(S.a.Group,{controlId:"formBasicConfirmPassword"},r.a.createElement(S.a.Label,null,"Confirm Password*"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Confirm Password",name:"confirmpassword",value:W,onChange:ue,onBlur:ue}),r.a.createElement("div",null,z)),r.a.createElement(S.a.Group,{controlId:"formBasicOrganization"},r.a.createElement(S.a.Label,null,"Organization*"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Organization",name:"organization",value:Y,onChange:ue,onBlur:ue}),r.a.createElement("div",null,ee)),r.a.createElement("h4",null,re),r.a.createElement(i.a,{variant:"primary",disabled:le,onClick:me},le&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(c.b,{to:"/login",className:"link"},r.a.createElement("p",null,"Already have an account? Login here.")))))))})),R=a(60),D=function(e){var t=e.component,a=Object(R.a)(e,["component"]),s=Object(n.useContext)(C).currentUser;return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return s?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/login"})}}))},B=function(e){var t,a=e.history,s=e.location,o=Object(n.useState)("Select the question"),c=Object(y.a)(o,2),l=c[0],u=c[1],m=Object(n.useState)(""),d=Object(y.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(y.a)(h,2),E=g[0],C=g[1],I=Object(n.useState)(""),A=Object(y.a)(I,2),k=A[0],P=A[1],x=Object(n.useState)(""),L=Object(y.a)(x,2),N=L[0],R=L[1],D=Object(n.useState)(!1),B=Object(y.a)(D,2),F=B[0],Q=B[1],M=(null===s||void 0===s||null===(t=s.state)||void 0===t?void 0:t.uid)||null,V=function(e){R("");var t=e.target,a=t.name,n=t.value;"question"===a?(u(n),f("Select the question"!==n?"":"Please select the question")):"answer"===a&&(C(n),P(n?"":"Value is Required"))},X=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Q(!0),l&&E){e.next=6;break}return R("Please fill all mandatory fields"),Q(!1),e.abrupt("return",!1);case 6:if(!p&&!k){e.next=10;break}return R("Please check the error"),Q(!1),e.abrupt("return",!1);case 10:return e.next=12,j.a.post("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users",{uid:M,question:l,answer:E});case 12:if(!e.sent.data.body){e.next=19;break}Q(!1),R("User registered Successfully"),a.push("/login"),e.next=27;break;case 19:return e.next=21,j.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(M));case 21:return e.next=23,j.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(M));case 23:return R("Error Occured... User not registered"),Q(!1),a.push("/register"),e.abrupt("return",!1);case 27:Q(!1);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("br",null),r.a.createElement(w.a,null,r.a.createElement(U.a,{sm:6},r.a.createElement("h1",null,"Enter Security Question and Answer"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formQuestion"},r.a.createElement(S.a.Label,null,"Question*"),r.a.createElement(S.a.Control,{as:"select",custom:!0,onChange:V,onBlur:V,value:l,name:"question"},r.a.createElement("option",{value:"Select the question",hidden:!0},"Select the question"),r.a.createElement("option",{value:"What is your favourite destination?"},"What is your favourite destination?"),r.a.createElement("option",{value:"What is the name of your first pet?"},"What is the name of your first pet?"),r.a.createElement("option",{value:"what is the name of your oldest cousin?"},"what is the name of your oldest cousin?")),r.a.createElement("div",null,p)),r.a.createElement(S.a.Group,{controlId:"formAnswer"},r.a.createElement(S.a.Label,null,"Answer*"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:E,onChange:V,onBlur:V}),r.a.createElement("div",null,k)),r.a.createElement("h4",null,N),r.a.createElement(i.a,{variant:"primary",onClick:X,disabled:F},F&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"))))))},F=function(e){var t,a,s,o,c=e.history,l=e.location,u=Object(n.useState)(""),m=Object(y.a)(u,2),p=m[0],f=m[1],h=Object(n.useState)(""),g=Object(y.a)(h,2),E=g[0],C=g[1],I=Object(n.useState)(""),A=Object(y.a)(I,2),k=A[0],P=A[1],x=Object(n.useState)(!1),L=Object(y.a)(x,2),N=L[0],R=L[1],D=(null===l||void 0===l||null===(t=l.state)||void 0===t?void 0:t.email)||null,B=(null===l||void 0===l||null===(a=l.state)||void 0===a?void 0:a.password)||null,F=(null===l||void 0===l||null===(s=l.state)||void 0===s?void 0:s.uid)||null,Q=(null===l||void 0===l||null===(o=l.state)||void 0===o?void 0:o.question)||null,M=function(e){P("");var t=e.target,a=t.name,n=t.value;"answer"===a&&(f(n),C(n?"":"Value is Required"))},V=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),R(!0),p){e.next=6;break}return R(!1),P("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!E){e.next=10;break}return R(!1),P("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,j.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users?uid=".concat(F,"&answer=").concat(p));case 12:if("User Autheticated Successfully"!==e.sent.data.body){e.next=17;break}d.signInWithEmailAndPassword(D,B).then((function(e){R(!1),c.push("/chat")})).catch((function(e){R(!1);var t=e.message;P(t)})),e.next=20;break;case 17:return R(!1),P("Please enter the correct answer"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("br",null),r.a.createElement(w.a,null,r.a.createElement(U.a,{sm:6},r.a.createElement("h1",null,"Answer the Security Question"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formQuestion"},r.a.createElement(S.a.Label,null,"Question"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Enter Question",name:"question",value:Q,onChange:M,onBlur:M,disabled:!0})),r.a.createElement(S.a.Group,{controlId:"formAnswer"},r.a.createElement(S.a.Label,null,"Answer*"),r.a.createElement(S.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:p,onChange:M,onBlur:M}),r.a.createElement("div",null,E)),r.a.createElement("h4",null,k),r.a.createElement(i.a,{variant:"primary",onClick:V,disabled:N},N&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"))))))},Q=a(59),M=a(25),V=a(26),X=a(21),W=a(28),K=a(27),q=(a(101),a(102),a(109)),H=a(39),z=a.n(H),G=a(57),T=a.n(G),Z=a(58),Y=a.n(Z),J=function(e){Object(W.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).getListHistory=function(){n.removeListener&&n.removeListener(),n.listMessage.length=0,n.setState({isLoading:!0}),n.hashString(n.currentUserId)<=n.hashString(n.currentPeerUser.id)?n.groupChatId="".concat(n.currentUserId,"-").concat(n.currentPeerUser.id):n.groupChatId="".concat(n.currentPeerUser.id,"-").concat(n.currentUserId),n.removeListener=p.collection("Messages").doc(n.groupChatId).collection(n.groupChatId).onSnapshot((function(e){e.docChanges().forEach((function(e){e.type===A.DOC&&n.listMessage.push(e.doc.data())})),n.setState({isLoading:!1})}),(function(e){n.props.showToast(0,e.toString())}))},n.openListSticker=function(){n.setState({isShowSticker:!n.state.isShowSticker})},n.onSendMessage=function(e,t){if(n.state.isShowSticker&&2===t&&n.setState({isShowSticker:!1}),""!==e.trim()){var a=z()().valueOf().toString(),r={idFrom:n.currentUserId,idTo:n.currentPeerUser.id,timestamp:a,content:e.trim(),type:t};p.collection("Messages").doc(n.groupChatId).collection(n.groupChatId).doc(a).set(r).then((function(){n.setState({inputValue:""})}))}},n.scrollToBottom=function(){n.messagesEnd&&n.messagesEnd.scrollIntoView({})},n.onKeyPress=function(e){"Enter"===e.key&&n.onSendMessage(n.state.inputValue,0)},n.onChoosePhoto=function(e){e.target.files&&e.target.files[0]?(n.setState({isLoading:!0}),n.currentPhotoFile=e.target.files[0],0===e.target.files[0].type.toString().indexOf(A.PREFIX_IMAGE)?n.uploadPhoto():(n.setState({isLoading:!1}),n.props.showToast(0,"This file is not an image"))):n.setState({isLoading:!1})},n.uploadPhoto=function(){if(n.currentPhotoFile){var e=z()().valueOf().toString(),t=f.ref().child(e).put(n.currentPhotoFile);t.on(A.UPLOAD_CHANGED,null,(function(e){n.setState({isLoading:!1}),n.props.showToast(0,e.message)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){n.setState({isLoading:!1}),n.onSendMessage(e,1)}))}))}else n.setState({isLoading:!1}),n.props.showToast(0,"File is null")},n.hashString=function(e){for(var t=0,a=0;a<e.length;a++)t+=Math.pow(31*e.charCodeAt(a),e.length-a),t&=t;return t},n.state={isLoading:!1,isShowSticker:!1,inputValue:""},n.currentUserName=localStorage.getItem(A.Name),n.currentUserId=localStorage.getItem(A.ID),n.currentUserPhoto=localStorage.getItem(A.PhotoURL),n.currentUserDocumentId=localStorage.getItem(A.FirebaseDocumentId),n.stateChanged=localStorage.getItem(A.UPLOAD_CHANGED),n.currentPeerUser=n.props.currentPeerUser,n.groupChatId=null,n.listMessage=[],n.currentPeerUserMessages=[],n.removeListener=null,n.currentPhotoFile=null,p.collection("users").doc(n.currentPeerUser.documentKey).get().then((function(e){n.currentPeerUserMessages=e.data().messages})),n}return Object(V.a)(a,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillReceiveProps",value:function(e){e.currentPeerUser&&(this.currentPeerUser=e.currentPeerUser,this.getListHistory())}},{key:"componentWillUnmount",value:function(){this.removeListener&&this.removeListener()}},{key:"componentDidMount",value:function(){this.getListHistory()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(q.a,{className:"viewChatBoard"},r.a.createElement("div",{className:"headerChatBoard"},r.a.createElement("img",{className:"viewAvatarItem",src:this.currentPeerUser.URL,alt:""}),r.a.createElement("span",{className:"textHeaderChatBoard"},r.a.createElement("p",{style:{fontSize:"20px"}},this.currentPeerUser.name)),r.a.createElement("div",null,r.a.createElement("span",{className:"textHeaderChatBoard"},r.a.createElement("p",{style:{fontSize:"20px"}},this.currentPeerUser.description)))),r.a.createElement("div",{className:"viewListContentChat"},r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),r.a.createElement("div",{className:"viewBottom"},r.a.createElement("img",{className:"icOpenGallery",src:T.a,alt:"icon open gallery",onClick:function(){return e.refInput.click()}}),r.a.createElement("input",{ref:function(t){e.refInput=t},accept:"image/*",className:"viewInputGallery",type:"file",onChange:this.onChoosePhoto}),r.a.createElement("input",{className:"viewInput",placeholder:"Type a message",value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onKeyPress:this.onKeyPress}),r.a.createElement("img",{className:"icSend",src:Y.a,onClick:function(){e.onSendMessage(e.state.inputValue,0)}}))))}}]),a}(n.Component),_=(a(104),function(e){Object(W.a)(a,e);var t=Object(K.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(V.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Welcome, ".concat(this.props.currentUserName)),r.a.createElement("span",null,"Let's Connect"))}}]),a}(n.Component)),$=function(e){Object(W.a)(a,e);var t=Object(K.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).logout=function(){d.signOut(),n.props.history.push("/"),localStorage.clear()},n.onProfileClick=function(){n.props.history.push("/profile")},n.getListUser=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HI5"),e.next=3,p.collection("users").get();case 3:t=e.sent,console.log("HI2"),console.log(t),t>0&&([],Object(Q.a)(t.docs).forEach((function(e,t){n.searchUsers.push({key:t,documentKey:e.id,id:e.data().id,name:e.data().name,messages:e.data().messages,URL:e.data().URL,description:e.data().description})})),n.setState({isLoading:!1})),n.renderListUser();case 8:case"end":return e.stop()}}),e)}))),n.getClassnameforUserandNotification=function(e){var t="",a=!1;return n.state.currentPeerUser&&n.state.currentPeerUser.id===e?t="viewWrapItemFocused":(n.state.displayedContactSwitchedNotification.forEach((function(t){var n;(null===(n=t.notificationId)||void 0===n?void 0:n.length)>0&&t.notificationId===e&&(a=!0,t.number)})),t=!0===a?"viewWrapItemNotification":"viewWrapItem"),t},n.notificationErase=function(e){n.state.displayedContactSwitchedNotification.forEach((function(t){var a;(null===(a=t.notificationId)||void 0===a?void 0:a.length)>0&&t.notificationId!=e&&n.notificationMessagesErase.push({notificationId:t.notificationId,number:t.number})})),n.updaterenderList()},n.updaterenderList=function(){p.collection("users").doc(n.currentUserId).update({messages:n.notificationMessagesErase}),n.setState({displayedContactSwitchedNotification:n.notificationMessagesErase})},n.renderListUser=function(){if(n.searchUsers.length>0){var e=[],t="";n.searchUsers.map((function(a){a.id!=n.currentUserId&&(t=n.getClassnameforUserandNotification(a.id),e.push(r.a.createElement("button",{id:a.key,className:t,onClick:function(){n.notificationErase(a.id),n.setState({currentPeerUser:a}),document.getElementById(a.key).style.backgroundColor="#fff",document.getElementById(a.key).style.color="#fff"}},r.a.createElement("img",{className:"viewAvatarItem",src:a.URL,alt:""}),r.a.createElement("div",{className:"viewWrapContentItem"},r.a.createElement("span",{className:"textItem"},"".concat(a.name))),"viewWrapItemNotification"===t?r.a.createElement("div",{className:"notification"},r.a.createElement("p",{id:a.key,className:"newmessages"},"New message")):null)))})),n.setState({displayedContacts:e})}else console.log("no user present")},n.searchHandler=function(e){var t=e.target.value.toLowerCase(),a=n.searchUsers.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)}));n.displayedContacts=a,n.displayedSearchedContacts()},n.displayedSearchedContacts=function(){if(n.searchUsers.length>0){var e=[],t="";n.displayedContacts.map((function(a){a.id!=n.currentUserId&&(t=n.getClassnameforUserandNotification(a.id),e.push(r.a.createElement("button",{id:a.key,className:t,onClick:function(){n.notificationErase(a.id),n.setState({currentPeerUser:a}),document.getElementById(a.key).style.backgroundColor="#fff",document.getElementById(a.key).style.color="#fff"}},r.a.createElement("img",{className:"viewAvatarItem",src:a.URL,alt:""}),r.a.createElement("div",{className:"viewWrapContentItem"},r.a.createElement("span",{className:"textItem"},"".concat(a.name))),"viewWrapItemNotification"===t?r.a.createElement("div",{className:"notification"},r.a.createElement("p",{id:a.key,className:"newmessages"},"New message")):null)))})),n.setState({displayedContacts:e})}else console.log("no user present")},n.state={isLoading:!0,isOpenDialogConfirmLogout:!1,currentPeerUser:null,displayedContactSwitchedNotification:[],displayedContacts:[]},n.currentUserName=localStorage.getItem(A.Name),n.currentUserId=localStorage.getItem(A.ID),n.currentUserPhoto=localStorage.getItem(A.PhotoURL),n.currentUserDocumentId=localStorage.getItem(A.FirebaseDocumentId),n.currentUserMessages=[],n.searchUsers=[],n.notificationMessagesErase=[],n.onProfileClick=n.onProfileClick.bind(Object(X.a)(n)),n.getListUser=n.getListUser.bind(Object(X.a)(n)),n.renderListUser=n.renderListUser.bind(Object(X.a)(n)),n.getClassnameforUserandNotification=n.getClassnameforUserandNotification.bind(Object(X.a)(n)),n.notificationErase=n.notificationErase.bind(Object(X.a)(n)),n.updaterenderList=n.updaterenderList.bind(Object(X.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("HI"),p.collection("users").doc(this.currentUserId).get().then((function(t){t.data().messages.map((function(t){e.currentUserMessages.push({notificationId:t.notificationId,number:t.number})})),e.setState({displayedContactSwitchedNotification:e.currentUserMessages})})),console.log("HI1"),this.getListUser(),console.log("HI4")}},{key:"render",value:function(){return r.a.createElement("div",{className:"root"},r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"viewListUser"},r.a.createElement("div",{className:"profileviewleftside"},r.a.createElement("img",{className:"ProfilePicture",alt:"",src:this.currentUserPhoto,onClick:this.onProfileClick}),r.a.createElement("button",{onClick:this.logout},"Logout")),r.a.createElement("div",{className:"rootsearchbar"},r.a.createElement("div",{className:"input-container"},r.a.createElement("i",{class:"fa fa-search icon"},r.a.createElement("input",{class:"input-field",type:"text",onChange:this.searchHandler,placeholder:"search"})))),this.state.displayedContacts),r.a.createElement("div",{className:"viewboard"},this.state.currentPeerUser?r.a.createElement(J,{currentPeerUser:this.state.currentPeerUser,showToast:this.props.showToast}):r.a.createElement(_,{currentUserName:this.currentUserName,currentUserPhoto:this.currentUserPhoto}))))}}]),a}(n.Component);var ee=function(){return r.a.createElement(I,null,r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(D,{exact:!0,path:"/",component:g}),r.a.createElement(D,{exact:!0,path:"/home",component:g}),r.a.createElement(l.b,{exact:!0,path:"/login",component:P}),r.a.createElement(l.b,{exact:!0,path:"/register",component:N}),r.a.createElement(l.b,{exact:!0,path:"/secondfactor",component:B}),r.a.createElement(l.b,{exact:!0,path:"/chat",component:$}),r.a.createElement(l.b,{exact:!0,path:"/loginsecondfactor",component:F}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAclBMVEX///8AAAA7Ozurq6unp6c3Nzdzc3Nvb2/f39/j4+MODg76+vrx8fEqKioGBgbPz8++vr7X19fq6upUVFRCQkJbW1swMDCLi4sXFxcfHx+enp6RkZF7e3uGhoZISEhNTU1lZWXExMS3t7eBgYElJSWXl5dNMiH1AAADqklEQVR4nO3ca1uqQBSG4T0hpoAIWCSIJ8j//xd3brcJOAfNxbSm3uezdXFfQDAH+/MHIYQQQgghhBBCCN2Q71o7BUS41hMgzAKEW4BwCxBu/SbIwWPb812QqeIjDBoBwixAuAUItwDhFiDckkOy58/GTkMmrYMHxG6AcAsQbgHCLUBUZUm5WpVJNtwhy6OFTKrZ+aOzajLogfejhKQL0Wlhk0IIWceiV/w29OFfIoNEmz7j2DYannCKChL5MsfHL7UlIYKEL3KHEJvQBoMMMlY5hKhsMKgge7VDiLlDEMUNcurFHUiicwixdwbyqoe8ugIJr56E3QIbf7goIIYry861RQFZmSAHRyCtdUh5Y0cghntdiJ0jkN7b+3U2/mxRQHY/5Yw0JsjaEUjrd8jzHIFMTRAbMxEkryi53uFbcNBADE9EG89DGkgU6BxLK6NdmvHImw6ysuEggoSauyS3M2gnGrOnyosrsDRLRzUdlCjGJHFiAXGMbIKulkqCenjCKbop0/n7tWNmZwblGOHcb1T1TkpcWZswJV5WmI6Xl88ux1aXhYgXesJ9s/Df3/1Fs7c0VXoOS2/cAoRbgHALEG4Bwi1Ahm7qNdu8CERc+Iv1DaMBnpD5ZXPOqWKXGn6EISQspVMZr3oKO0i4KmSMY5VuZMANUksGzJ/lmpPCC5JtNYyPYvVcBiuI1xopKyQjByChceXrmGpGnA9kYlicOKdYNWIDSYyX1f9i+fYDLpDSsA2k1VJ6FEwg1c0Modg3xQISGlfqu8k2r3KAZE/3OUQseYlkAEl1D3N5ki/ofT+k1i5AKiptQKJ54nlePZ/cNPurXX5Udr3ASgzJykXrQim2TaLXRHfe5p81Q0LCUnLXxtuRepVkr3xlNxX0d1PQQbJKdbEHO/lCYmbc6KWpvy+abG+8kvGvYny1XjLV/4SpoHeeiSCl+U0p2DZ1etZMDovb30nk9Z6KJJD09idaUMzyvHgUcazonmIKyBvFcd1f933+cchU+Y2LgdvQQm4eR9DXOZpHIWtbRy2ps1XyMUj4yJPg4XIySHTv+zdxKRFk2pugtd6aBjL58osSVT4J5PsdnX24X4ZwcLSfiV+GzL/7n84dSwkg3AKEW4BwCxBuAcKtXwrZPbNtcxfEjQDhFiDcAoRbgHDrx0PGrnVQQFwOEG4Bwi1AuAUIt34TpB650MoM0f5HQ5YBwi1AuAUItwDh1k+H7J5cyA8uKSAIIYQQQgghhBBCqNNfxOVk6BsbT0kAAAAASUVORK5CYII="},58:function(e,t){e.exports="data:image/png;base64,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"},61:function(e,t,a){e.exports=a(105)},66:function(e,t,a){},68:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.00ecb0d8.chunk.js.map